<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IdealFit - Merchant Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #1a202c;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 100%);
            padding: 2rem 0;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        }
        
        .user-section {
            padding: 1.5rem 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }
        
        .user-info-sidebar {
            flex: 1;
        }
        
        .user-name {
            color: white;
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 4px;
        }
        
        .user-email {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
        }
        
        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            padding: 0 1rem;
        }
        
        .tab {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 12px;
            color: rgba(255, 255, 255, 0.8);
            border-left: 3px solid transparent;
            margin: 4px 0;
        }
        
        .tab:hover {
            background: rgba(255, 255, 255, 0.1);
            border-left-color: #60a5fa;
            color: white;
            transform: translateX(4px);
        }
        
        .tab.active {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-weight: 600;
            border-left-color: #60a5fa;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .tab-icon {
            font-size: 1.3rem;
            opacity: 0.9;
        }
        
        .tab-label {
            flex: 1;
        }
        
        .main-content {
            flex: 1;
            padding: 2rem;
            background: #f8fafc;
        }
        
        .page-header {
            margin-bottom: 2rem;
        }
        
        .page-title {
            font-size: 2rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .page-subtitle {
            color: #718096;
            font-size: 1.1rem;
        }
        
        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            transform: translateY(-2px);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }
        
        .logout-section {
            margin-top: auto;
            padding: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logout-btn {
            width: 100%;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 12px;
            color: rgba(239, 68, 68, 0.9);
            margin: 4px 0;
        }
        
        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            transform: translateX(4px);
        }
        
        /* Quick Filter Buttons */
        .quick-filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #374151;
        }
        
        .quick-filter-btn:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }
        
        .quick-filter-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        
        /* Button Styles */
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        /* Insights Table */
        .insights-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .insights-table th {
            background: #f8fafc;
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
            font-weight: 600;
            color: #374151;
            font-size: 0.875rem;
        }
        
        .insights-table td {
            padding: 12px;
            border-bottom: 1px solid #f3f4f6;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .insights-table tr:hover {
            background: #f8fafc;
        }
        
        /* Priority Badge */
        .priority-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .priority-badge.high {
            background: #dcfce7;
            color: #166534;
        }
        
        .priority-badge.medium {
            background: #fef3c7;
            color: #92400e;
        }
        
        .priority-badge.low {
            background: #fecaca;
            color: #991b1b;
        }
        
        /* Recommendation Cards */
        .recommendation-card {
            padding: 1.5rem;
            border-radius: 12px;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .recommendation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.1;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white"/><circle cx="75" cy="75" r="1" fill="white"/><circle cx="50" cy="10" r="0.5" fill="white"/><circle cx="10" cy="60" r="0.5" fill="white"/><circle cx="90" cy="40" r="0.5" fill="white"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
        }
        
        .recommendation-card.top-performers {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .recommendation-card.high-demand {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
        }
        
        .recommendation-header {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
            opacity: 0.9;
        }
        
        .recommendation-metric {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .recommendation-description {
            font-size: 0.875rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }
        
        .recommendation-focus {
            font-size: 0.875rem;
            opacity: 0.95;
        }
        
        .recommendation-focus ul {
            margin: 0.5rem 0 0 1rem;
            list-style: none;
        }
        
        .recommendation-focus li {
            margin-bottom: 0.25rem;
        }
        
        .recommendation-focus input[type="checkbox"] {
            margin-right: 0.5rem;
        }
        
        /* Customer Table */
        .customer-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .customer-table th {
            background: #f8fafc;
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
            font-weight: 600;
            color: #374151;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .customer-table td {
            padding: 12px;
            border-bottom: 1px solid #f3f4f6;
            color: #6b7280;
            font-size: 0.875rem;
        }
        
        .customer-table tr:hover {
            background: #f8fafc;
        }
        
        /* Size Badges */
        .size-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .size-badge.size-s {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .size-badge.size-m {
            background: #dcfce7;
            color: #166534;
        }
        
        .size-badge.size-l {
            background: #fef3c7;
            color: #92400e;
        }
        
        .size-badge.size-xl {
            background: #fecaca;
            color: #991b1b;
        }
        
        .size-badge.size-xs {
            background: #e5e7eb;
            color: #374151;
        }
        
        .size-badge.size-xxl {
            background: #ddd6fe;
            color: #7c3aed;
        }
        
        /* Modern Button Styles */
        .modern-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            outline: none;
        }
        
        .modern-btn.secondary-btn {
            background: #ffffff;
            color: #6b7280;
            border: 1px solid #d1d5db;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        .modern-btn.secondary-btn:hover {
            background: #f9fafb;
            border-color: #9ca3af;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .modern-btn.primary-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 2px 4px rgba(102, 126, 234, 0.3);
        }
        
        .modern-btn.primary-btn:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.4);
            transform: translateY(-1px);
        }
        
        .modern-btn:active {
            transform: translateY(0);
        }
        
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ef4444 0%, #ffffff 50%, #3b82f6 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .logo-icon::before {
            content: '🎯';
            font-size: 20px;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .logo-text {
            color: white;
            font-size: 1.25rem;
            font-weight: 700;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-initials {
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .notification-bell {
            color: #fbbf24;
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .notification-bell:hover {
            color: #f59e0b;
            transform: scale(1.1);
        }
        
        .notification-bell::after {
            content: '';
            position: absolute;
            top: -2px;
            right: -2px;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            border: 2px solid white;
        }
        
        .header-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
        }
        
        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }
        
        .header-btn:active {
            transform: translateY(0);
        }
        
        /* Notification Panel Styles */
        .notification-panel {
            position: absolute;
            top: 100%;
            right: 0;
            width: 350px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 1px solid #e5e7eb;
            z-index: 1000;
            display: none;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .notification-panel.show {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .notification-header {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
            background: #f8fafc;
            border-radius: 12px 12px 0 0;
        }
        
        .notification-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1e3a8a;
            margin: 0;
        }
        
        .notification-item {
            padding: 1rem;
            border-bottom: 1px solid #f3f4f6;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .notification-item:hover {
            background: #f8fafc;
        }
        
        .notification-item:last-child {
            border-bottom: none;
        }
        
        .notification-content {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }
        
        .notification-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            flex-shrink: 0;
        }
        
        .notification-icon.info {
            background: #dbeafe;
            color: #1e40af;
        }
        
        .notification-icon.success {
            background: #dcfce7;
            color: #166534;
        }
        
        .notification-icon.warning {
            background: #fef3c7;
            color: #92400e;
        }
        
        .notification-icon.error {
            background: #fecaca;
            color: #991b1b;
        }
        
        .notification-text {
            flex: 1;
        }
        
        .notification-message {
            font-size: 0.875rem;
            color: #374151;
            margin-bottom: 0.25rem;
            line-height: 1.4;
        }
        
        .notification-time {
            font-size: 0.75rem;
            color: #6b7280;
        }
        
        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: #ef4444;
            color: white;
            font-size: 0.625rem;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
            border: 2px solid white;
        }
        
        .notification-empty {
            padding: 2rem;
            text-align: center;
            color: #6b7280;
        }
        
        .notification-empty-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <div class="logo">
                <div class="logo-icon"></div>
                <div class="logo-text">IdealFit Merchant Dashboard</div>
            </div>
        </div>
        
        <div class="header-right">
            <div class="notification-bell" onclick="toggleNotifications()">
                🔔
                <span class="notification-badge" id="notificationCount">3</span>
            </div>
            <button class="header-btn" onclick="openSettings()">
                ⚙️ Settings
            </button>
            <button class="header-btn" onclick="logout()">
                🚪 Logout
            </button>
        </div>
    </div>

    <!-- Notification Panel -->
    <div class="notification-panel" id="notificationPanel">
        <div class="notification-header">
            <h3 class="notification-title">Notifications</h3>
        </div>
        <div id="notificationList">
            <!-- Notifications will be populated here -->
        </div>
    </div>

    <div class="container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <!-- User Section -->
            <div class="user-section">
                <div class="user-avatar">
                    🏪
                </div>
                <div class="user-info-sidebar">
                    <div class="user-name">Merchant Store</div>
                    <div class="user-email">store@example.com</div>
        </div>
    </div>

                <div class="sidebar-nav">
                    <button class="tab active" onclick="showTab('analytics')">
                        <span class="tab-icon">📊</span>
                        <span class="tab-label">Analytics</span>
                    </button>
                    <button class="tab" onclick="showTab('customers')">
                        <span class="tab-icon">👥</span>
                        <span class="tab-label">Customer Database</span>
                    </button>
                    <button class="tab" onclick="showTab('sizechart')">
                        <span class="tab-icon">📏</span>
                        <span class="tab-label">Size Chart</span>
                    </button>
                    <button class="tab" onclick="showTab('billing')">
                        <span class="tab-icon">💰</span>
                        <span class="tab-label">Billing</span>
                    </button>
                </div>
            
            <!-- Logout Button -->
            <div class="logout-section">
                <button class="logout-btn" onclick="logout()">
                    <span class="tab-icon">🚪</span>
                    <span class="tab-label">Logout</span>
                </button>
            </div>
            </div>

            <!-- Main Content Area -->
            <div class="main-content">
            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content active">
                <div class="page-header">
                    <h1 class="page-title">📊 Analytics & Size Comparison</h1>
                    <p class="page-subtitle">Understand your customer measurements and optimize production</p>
                </div>

                <!-- Date Filters Card -->
                <div class="card">
                    <h2 style="color: #1e3a8a; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 8px;">
                        📅 Date Filters
                    </h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">From Date</label>
                            <input type="date" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">To Date</label>
                            <input type="date" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Month</label>
                            <select style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                                <option>All Months</option>
                                <option>January</option>
                                <option>February</option>
                                <option>March</option>
                                <option>April</option>
                                <option>May</option>
                                <option>June</option>
                                <option>July</option>
                                <option>August</option>
                                <option>September</option>
                                <option>October</option>
                                <option>November</option>
                                <option>December</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Year</label>
                            <select style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                                <option>All Years</option>
                                <option>2024</option>
                                <option>2023</option>
                                <option>2022</option>
                            </select>
                        </div>
                    </div>

                    <!-- Quick Filter Buttons -->
                    <div style="margin-bottom: 1.5rem;">
                        <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Quick Filters</label>
                        <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                            <button class="quick-filter-btn" onclick="setQuickFilter('today')">Today</button>
                            <button class="quick-filter-btn" onclick="setQuickFilter('week')">This Week</button>
                            <button class="quick-filter-btn" onclick="setQuickFilter('month')">This Month</button>
                            <button class="quick-filter-btn" onclick="setQuickFilter('quarter')">This Quarter</button>
                            <button class="quick-filter-btn" onclick="setQuickFilter('year')">This Year</button>
                            <button class="quick-filter-btn" onclick="setQuickFilter('all')">All Time</button>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div style="display: flex; gap: 0.75rem; justify-content: flex-end; margin-top: 1rem;">
                        <button class="modern-btn secondary-btn" onclick="clearFilters()">
                            Clear Filters
                        </button>
                        <button class="modern-btn primary-btn" onclick="applyFilters()">
                            🔍 Apply Filters
                        </button>
                        <button class="modern-btn primary-btn" onclick="exportData()">
                            📊 Export Filtered Data (Excel)
                        </button>
                    </div>
                </div>

                <!-- KPI Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">📦</div>
                        <div class="stat-number">3</div>
                        <div class="stat-label">Total Orders</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">👤</div>
                        <div class="stat-number">1</div>
                        <div class="stat-label">Unique Customers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">📏</div>
                        <div class="stat-number">L</div>
                        <div class="stat-label">Most Popular Size</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">📈</div>
                        <div class="stat-number">32%</div>
                        <div class="stat-label">Est. Return Reduction</div>
                    </div>
                </div>

                <!-- Size Distribution Card -->
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: #1e3a8a; display: flex; align-items: center; gap: 8px;">
                            📊 Size Distribution
                        </h2>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <select style="padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem;">
                                <option>All Months</option>
                            </select>
                            <select style="padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 6px; font-size: 0.875rem;">
                                <option>All Years</option>
                            </select>
                            <button class="modern-btn primary-btn" onclick="exportSizeDistribution()">
                                📊 Export to Excel
                            </button>
                        </div>
                    </div>
                    
                    <div style="background: #f8fafc; border: 2px dashed #cbd5e1; border-radius: 12px; padding: 3rem; text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 1rem;">📊</div>
                        <h3 style="color: #4a5568; margin-bottom: 0.5rem;">Size Recommendations Distribution</h3>
                        <p style="color: #718096;">Chart visualization will be displayed here</p>
                    </div>
                </div>

                <!-- Size Comparison & Production Insights -->
                <div class="card">
                    <h2 style="color: #1e3a8a; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 8px;">
                        ✅ Size Comparison & Production Insights
                    </h2>
                    
                    <div style="overflow-x: auto;">
                        <table class="insights-table">
                        <thead>
                            <tr>
                                    <th>SIZE</th>
                                    <th>RECOMMENDATIONS</th>
                                    <th>PERCENTAGE</th>
                                    <th>AVG BUST</th>
                                    <th>AVG WAIST</th>
                                    <th>AVG HIP</th>
                                    <th>PRODUCTION PRIORITY</th>
                            </tr>
                        </thead>
                            <tbody>
                                <tr>
                                    <td><strong>L</strong></td>
                                    <td>1</td>
                                    <td>33.3%</td>
                                    <td>37.0"</td>
                                    <td>30.0"</td>
                                    <td>35.0"</td>
                                    <td><span class="priority-badge high">HIGH</span></td>
                            </tr>
                            <tr>
                                <td><strong>M</strong></td>
                                    <td>1</td>
                                    <td>33.3%</td>
                                    <td>35.0"</td>
                                    <td>25.0"</td>
                                    <td>35.0"</td>
                                    <td><span class="priority-badge high">HIGH</span></td>
                            </tr>
                            <tr>
                                    <td><strong>S</strong></td>
                                    <td>1</td>
                                    <td>33.3%</td>
                                    <td>33.0"</td>
                                    <td>20.0"</td>
                                    <td>31.0"</td>
                                    <td><span class="priority-badge high">HIGH</span></td>
                            </tr>
                        </tbody>
                    </table>
                    </div>
                </div>

                <!-- Recommendations Section -->
                <div class="card">
                    <h2 style="color: #1e3a8a; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 8px;">
                        💡 Recommendations
                    </h2>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                        <!-- Top Performers Card -->
                        <div class="recommendation-card top-performers">
                            <div class="recommendation-header">TOP PERFORMERS</div>
                            <div class="recommendation-metric">66.6%</div>
                            <div class="recommendation-description">of all recommendations</div>
                            <div class="recommendation-focus">
                                <strong>Focus Production On:</strong>
                                <ul>
                                    <li>Size L (1 orders)</li>
                                    <li>Size M (1 orders)</li>
                                </ul>
                </div>
            </div>

                        <!-- High Demand Card -->
                        <div class="recommendation-card high-demand">
                            <div class="recommendation-header">HIGH DEMAND</div>
                            <div class="recommendation-metric">3</div>
                            <div class="recommendation-description">sizes(s) with 50%+ demand</div>
                            <div class="recommendation-focus">
                                <strong>Increase Stock:</strong>
                                <ul>
                                    <li><input type="checkbox" checked> Size L - 33.3%</li>
                                    <li><input type="checkbox" checked> Size M - 33.3%</li>
                                    <li><input type="checkbox" checked> Size S - 33.3%</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Data-Driven Insights -->
                    <div style="background: #f8fafc; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
                        <h3 style="color: #1e3a8a; margin-bottom: 1rem;">📊 Data-Driven Insights</h3>
                        <div style="margin-bottom: 1rem;">
                            <strong>Primary Focus:</strong> Sizes L and M represent your core market (66.6% of demand)
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <strong>Customer Profile:</strong>
                            <ul style="margin-left: 1rem; margin-top: 0.5rem;">
                                <li>Size L: Bust 37.0", Waist 30.0", Hip 35.0"</li>
                                <li>Size M: Bust 35.0", Waist 25.0", Hip 35.0"</li>
                                <li>Size S: Bust 33.0", Waist 20.0", Hip 31.0"</li>
                            </ul>
                        </div>
                        <div>
                            <strong>Market Coverage:</strong> Your current size range covers 100.0% of customer measurements
                        </div>
                    </div>

                    <!-- Recommended Actions -->
                    <div style="background: #f0fdf4; padding: 1.5rem; border-radius: 12px; border-left: 4px solid #22c55e; margin-bottom: 1.5rem;">
                        <h3 style="color: #166534; margin-bottom: 1rem;">✅ Recommended Actions</h3>
                        <ul style="color: #166534; margin-left: 1rem;">
                            <li>Increase production for sizes L and M by 70%</li>
                            <li>Collect more data - You have 3/50 measurements. More data = better insights!</li>
                            <li>Review monthly - Update inventory strategy based on latest trends</li>
                        </ul>
                    </div>

                    <!-- Data Confidence Footer -->
                    <div style="background: #fef2f2; padding: 1rem; border-radius: 8px; border-left: 4px solid #ef4444;">
                        <div style="color: #dc2626; font-size: 0.875rem;">
                            <strong>Data Confidence: LOW</strong> - Early stage data (3 measurements) - insights will improve
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customer Database Tab -->
            <div id="customers" class="tab-content" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">👥 Customer Measurement Database</h1>
                    <p class="page-subtitle">View, filter, and export all customer measurement data</p>
                </div>

                <!-- Filters Card -->
                <div class="card">
                    <h2 style="color: #1e3a8a; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 8px;">
                        🔍 Filters
                    </h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Date From</label>
                            <input type="date" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Date To</label>
                            <input type="date" style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Month</label>
                            <select style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                                <option>All Months</option>
                                <option>January</option>
                                <option>February</option>
                                <option>March</option>
                                <option>April</option>
                                <option>May</option>
                                <option>June</option>
                                <option>July</option>
                                <option>August</option>
                                <option>September</option>
                                <option>October</option>
                                <option>November</option>
                                <option>December</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Year</label>
                            <select style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                                <option>All Years</option>
                                <option>2024</option>
                                <option>2023</option>
                                <option>2022</option>
                            </select>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: #374151;">Size</label>
                            <select style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 8px; font-size: 0.875rem;">
                                <option>All Sizes</option>
                                <option>XS</option>
                                <option>S</option>
                                <option>M</option>
                                <option>L</option>
                                <option>XL</option>
                                <option>XXL</option>
                            </select>
                        </div>
                        </div>

                    <!-- Action Buttons -->
                    <div style="display: flex; gap: 0.75rem; justify-content: flex-end; margin-top: 1rem;">
                        <button class="modern-btn secondary-btn" onclick="clearCustomerFilters()">
                            Clear Filters
                        </button>
                        <button class="modern-btn primary-btn" onclick="applyCustomerFilters()">
                            🔍 Apply Filters
                        </button>
                        <button class="modern-btn primary-btn" onclick="exportCustomerData()">
                            📊 Export to Excel
                        </button>
                    </div>
                </div>

                <!-- Customer Measurements Card -->
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h2 style="color: #1e3a8a; display: flex; align-items: center; gap: 8px;">
                            📄 Customer Measurements
                        </h2>
                        <div style="color: #6b7280; font-size: 0.875rem;">
                            Showing 5 of 5 customers
                        </div>
                    </div>
                    
                    <div style="overflow-x: auto;">
                        <table class="customer-table">
                            <thead>
                                <tr>
                                    <th>DATE</th>
                                    <th>CUSTOMER NAME</th>
                                    <th>EMAIL</th>
                                    <th>MOBILE</th>
                                    <th>ADDRESS</th>
                                    <th>CITY</th>
                                    <th>STATE</th>
                                    <th>COUNTRY</th>
                                    <th>BUST</th>
                                    <th>WAIST</th>
                                    <th>HIP</th>
                                    <th>RECOMMENDED SIZE</th>
                                    <th>ORDER ID</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2025-10-23</td>
                                    <td><strong>Sarah Johnson</strong></td>
                                    <td>sarah.johnson@email.com</td>
                                    <td>+1-555-0123</td>
                                    <td>123 Main Street</td>
                                    <td>New York</td>
                                    <td>NY</td>
                                    <td>USA</td>
                                    <td>37"</td>
                                    <td>30"</td>
                                    <td>35"</td>
                                    <td><span class="size-badge size-l">L</span></td>
                                    <td>6156246286380</td>
                                </tr>
                                <tr>
                                    <td>2025-10-23</td>
                                    <td><strong>Emily Davis</strong></td>
                                    <td>emily.davis@email.com</td>
                                    <td>+1-555-0456</td>
                                    <td>456 Oak Avenue</td>
                                    <td>Los Angeles</td>
                                    <td>CA</td>
                                    <td>USA</td>
                                    <td>35"</td>
                                    <td>25"</td>
                                    <td>35"</td>
                                    <td><span class="size-badge size-m">M</span></td>
                                    <td>6156248383532</td>
                                </tr>
                                <tr>
                                    <td>2025-10-23</td>
                                    <td><strong>Jessica Wilson</strong></td>
                                    <td>jessica.wilson@email.com</td>
                                    <td>+1-555-0789</td>
                                    <td>789 Pine Road</td>
                                    <td>Chicago</td>
                                    <td>IL</td>
                                    <td>USA</td>
                                    <td>33"</td>
                                    <td>20"</td>
                                    <td>31"</td>
                                    <td><span class="size-badge size-s">S</span></td>
                                    <td>6156248383533</td>
                                </tr>
                                <tr>
                                    <td>2025-10-22</td>
                                    <td><strong>Amanda Brown</strong></td>
                                    <td>amanda.brown@email.com</td>
                                    <td>+1-555-0321</td>
                                    <td>321 Elm Street</td>
                                    <td>Houston</td>
                                    <td>TX</td>
                                    <td>USA</td>
                                    <td>39"</td>
                                    <td>32"</td>
                                    <td>38"</td>
                                    <td><span class="size-badge size-xl">XL</span></td>
                                    <td>6156248383534</td>
                                </tr>
                                <tr>
                                    <td>2025-10-22</td>
                                    <td><strong>Michelle Taylor</strong></td>
                                    <td>michelle.taylor@email.com</td>
                                    <td>+1-555-0654</td>
                                    <td>654 Maple Drive</td>
                                    <td>Phoenix</td>
                                    <td>AZ</td>
                                    <td>USA</td>
                                    <td>34"</td>
                                    <td>26"</td>
                                    <td>36"</td>
                                    <td><span class="size-badge size-m">M</span></td>
                                    <td>6156248383535</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Size Chart Tab -->
            <div id="sizechart" class="tab-content" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">📏 Size Chart Management</h1>
                    <p class="page-subtitle">Configure your size chart and sync with Shopify</p>
                </div>

                <div class="card">
                    <h2 style="color: #1e3a8a; margin-bottom: 1rem;">📐 Size Chart Editor</h2>
                    <p style="color: #6b7280;">Size chart editor will be displayed here.</p>
                        </div>
                    </div>
                    
            <!-- Billing Tab -->
            <div id="billing" class="tab-content" style="display: none;">
                <div class="page-header">
                    <h1 class="page-title">💰 Billing & Subscription</h1>
                    <p class="page-subtitle">Manage your subscription and billing information</p>
                </div>

                <div class="card">
                    <h2 style="color: #1e3a8a; margin-bottom: 1rem;">💳 Current Plan</h2>
                    <p style="color: #6b7280;">Billing information will be displayed here.</p>
                    </div>
                            </div>
                        </div>
                        </div>

    <script>
        // Tab navigation
        function showTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.style.display = 'none');
            
            // Remove active class from all nav items
            const navItems = document.querySelectorAll('.tab');
            navItems.forEach(item => item.classList.remove('active'));
            
            // Add active class to clicked item
            event.target.classList.add('active');
            
            // Show selected content
            const content = document.getElementById(tabName);
            if (content) {
                content.style.display = 'block';
            }
        }

        // Logout
        function logout() {
            alert('Logout functionality will be implemented');
        }

        // Header Functions
        function showNotifications() {
            alert('Notifications panel will be implemented');
        }

        function openSettings() {
            alert('Settings panel will be implemented');
        }

        // Notification System
        let notifications = [
            {
                id: 1,
                type: 'success',
                message: 'New customer measurement received! Size L recommended.',
                time: '2 minutes ago',
                icon: '✅'
            },
            {
                id: 2,
                type: 'info',
                message: 'Analytics data updated for October 2024',
                time: '1 hour ago',
                icon: '📊'
            },
            {
                id: 3,
                type: 'warning',
                message: 'Low data confidence detected. Consider collecting more measurements.',
                time: '3 hours ago',
                icon: '⚠️'
            }
        ];

        function toggleNotifications() {
            const panel = document.getElementById('notificationPanel');
            panel.classList.toggle('show');
            
            if (panel.classList.contains('show')) {
                loadNotifications();
            }
        }

        function loadNotifications() {
            const notificationList = document.getElementById('notificationList');
            
            if (notifications.length === 0) {
                notificationList.innerHTML = `
                    <div class="notification-empty">
                        <div class="notification-empty-icon">🔔</div>
                        <p>No notifications yet</p>
                    </div>
                `;
                return;
            }
            
            notificationList.innerHTML = notifications.map(notification => `
                <div class="notification-item" onclick="markAsRead(${notification.id})">
                    <div class="notification-content">
                        <div class="notification-icon ${notification.type}">
                            ${notification.icon}
                        </div>
                        <div class="notification-text">
                            <div class="notification-message">${notification.message}</div>
                            <div class="notification-time">${notification.time}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function markAsRead(notificationId) {
            notifications = notifications.filter(n => n.id !== notificationId);
            updateNotificationCount();
            loadNotifications();
        }

        function updateNotificationCount() {
            const countElement = document.getElementById('notificationCount');
            countElement.textContent = notifications.length;
            
            if (notifications.length === 0) {
                countElement.style.display = 'none';
            } else {
                countElement.style.display = 'block';
            }
        }

        function addNotification(type, message, icon = '🔔') {
            const newNotification = {
                id: Date.now(),
                type: type,
                message: message,
                time: 'Just now',
                icon: icon
            };
            
            notifications.unshift(newNotification);
            updateNotificationCount();
            
            // Auto-show panel if it's not already open
            const panel = document.getElementById('notificationPanel');
            if (!panel.classList.contains('show')) {
                panel.classList.add('show');
                loadNotifications();
                
                // Auto-hide after 5 seconds
                setTimeout(() => {
                    panel.classList.remove('show');
                }, 5000);
            } else {
                loadNotifications();
            }
        }

        // Close notification panel when clicking outside
        document.addEventListener('click', function(event) {
            const panel = document.getElementById('notificationPanel');
            const bell = document.querySelector('.notification-bell');
            
            if (!panel.contains(event.target) && !bell.contains(event.target)) {
                panel.classList.remove('show');
            }
        });

        // Initialize notification system
        document.addEventListener('DOMContentLoaded', function() {
            updateNotificationCount();
            loadNotifications();
        });

        // Date Filter Functions
        function setQuickFilter(period) {
            const today = new Date();
            const fromDateInput = document.querySelector('input[type="date"]');
            const toDateInput = document.querySelectorAll('input[type="date"]')[1];
            
            // Remove active class from all buttons
            document.querySelectorAll('.quick-filter-btn').forEach(btn => btn.classList.remove('active'));
            // Add active class to clicked button
            event.target.classList.add('active');
            
            let fromDate, toDate;
            
            switch(period) {
                case 'today':
                    fromDate = toDate = today;
                    break;
                case 'week':
                    fromDate = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
                    toDate = today;
                    break;
                case 'month':
                    fromDate = new Date(today.getFullYear(), today.getMonth(), 1);
                    toDate = today;
                    break;
                case 'quarter':
                    const quarterStart = Math.floor(today.getMonth() / 3) * 3;
                    fromDate = new Date(today.getFullYear(), quarterStart, 1);
                    toDate = today;
                    break;
                case 'year':
                    fromDate = new Date(today.getFullYear(), 0, 1);
                    toDate = today;
                    break;
                case 'all':
                    fromDate = null;
                    toDate = null;
                    break;
            }
            
            if (fromDate && toDate) {
                fromDateInput.value = fromDate.toISOString().split('T')[0];
                toDateInput.value = toDate.toISOString().split('T')[0];
            } else {
                fromDateInput.value = '';
                toDateInput.value = '';
            }
        }

        function applyFilters() {
            const fromDate = document.querySelector('input[type="date"]').value;
            const toDate = document.querySelectorAll('input[type="date"]')[1].value;
            const month = document.querySelector('select').value;
            const year = document.querySelectorAll('select')[1].value;
            
            // Validate date range
            if (fromDate && toDate && new Date(fromDate) > new Date(toDate)) {
                alert('Error: From date cannot be later than To date');
                return;
            }
            
            // Show loading state
            const applyBtn = event.target;
            const originalText = applyBtn.innerHTML;
            applyBtn.innerHTML = '⏳ Applying...';
            applyBtn.disabled = true;
            
            // Simulate filter processing
            setTimeout(() => {
                // Update KPI cards based on filters
                updateKPICards(fromDate, toDate, month, year);
                
                // Update size distribution
                updateSizeDistribution(fromDate, toDate, month, year);
                
                // Update production insights
                updateProductionInsights(fromDate, toDate, month, year);
                
                // Reset button
                applyBtn.innerHTML = originalText;
                applyBtn.disabled = false;
                
                // Show success message
                alert('Filters applied successfully! Dashboard updated with filtered data.');
            }, 1500);
        }
        
        function updateKPICards(fromDate, toDate, month, year) {
            // Simulate filtered data based on date range
            let totalOrders = 3;
            let uniqueCustomers = 1;
            let mostPopularSize = 'L';
            let returnReduction = '32%';
            
            if (fromDate && toDate) {
                const daysDiff = Math.ceil((new Date(toDate) - new Date(fromDate)) / (1000 * 60 * 60 * 24));
                if (daysDiff < 7) {
                    totalOrders = 1;
                    uniqueCustomers = 1;
                } else if (daysDiff < 30) {
                    totalOrders = 2;
                    uniqueCustomers = 1;
                }
            }
            
            if (month !== 'All Months') {
                totalOrders = Math.floor(totalOrders * 0.8);
                returnReduction = '28%';
            }
            
            // Update KPI cards
            document.querySelector('.stat-card:nth-child(1) .stat-number').textContent = totalOrders;
            document.querySelector('.stat-card:nth-child(2) .stat-number').textContent = uniqueCustomers;
            document.querySelector('.stat-card:nth-child(3) .stat-number').textContent = mostPopularSize;
            document.querySelector('.stat-card:nth-child(4) .stat-number').textContent = returnReduction;
        }
        
        function updateSizeDistribution(fromDate, toDate, month, year) {
            // Update chart placeholder with filter info
            const chartPlaceholder = document.querySelector('.card:nth-child(3) .card > div:last-child');
            if (chartPlaceholder) {
                chartPlaceholder.innerHTML = `
                    <div style="font-size: 1.5rem; margin-bottom: 1rem;">📊</div>
                    <h3 style="color: #4a5568; margin-bottom: 0.5rem;">Size Recommendations Distribution</h3>
                    <p style="color: #718096;">Chart filtered by: ${fromDate ? fromDate + ' to ' + toDate : 'All dates'} ${month !== 'All Months' ? ' | ' + month : ''} ${year !== 'All Years' ? ' | ' + year : ''}</p>
                `;
            }
        }
        
        function updateProductionInsights(fromDate, toDate, month, year) {
            // Update table data based on filters
            const tableRows = document.querySelectorAll('.insights-table tbody tr');
            tableRows.forEach((row, index) => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 3) {
                    // Simulate filtered percentages
                    const percentages = ['33.3%', '33.3%', '33.3%'];
                    if (fromDate && toDate) {
                        const daysDiff = Math.ceil((new Date(toDate) - new Date(fromDate)) / (1000 * 60 * 60 * 24));
                        if (daysDiff < 7) {
                            percentages[index] = '100%';
                        }
                    }
                    cells[2].textContent = percentages[index];
                }
            });
            
            // Update recommendations
            const topPerformersMetric = document.querySelector('.recommendation-card.top-performers .recommendation-metric');
            const highDemandMetric = document.querySelector('.recommendation-card.high-demand .recommendation-metric');
            
            if (topPerformersMetric && highDemandMetric) {
                if (fromDate && toDate) {
                    const daysDiff = Math.ceil((new Date(toDate) - new Date(fromDate)) / (1000 * 60 * 60 * 24));
                    if (daysDiff < 7) {
                        topPerformersMetric.textContent = '100%';
                        highDemandMetric.textContent = '1';
                    } else if (daysDiff < 30) {
                        topPerformersMetric.textContent = '75%';
                        highDemandMetric.textContent = '2';
                    }
                }
            }
        }

        function clearFilters() {
            document.querySelectorAll('input[type="date"]').forEach(input => input.value = '');
            document.querySelectorAll('select').forEach(select => select.selectedIndex = 0);
            document.querySelectorAll('.quick-filter-btn').forEach(btn => btn.classList.remove('active'));
            alert('Filters cleared!');
        }

        function exportData() {
            // Export analytics data (KPI cards and insights)
            const exportData = {
                'Total Orders': '3',
                'Unique Customers': '1', 
                'Most Popular Size': 'L',
                'Est. Return Reduction': '32%',
                'Size L Recommendations': '1 (33.3%)',
                'Size M Recommendations': '1 (33.3%)',
                'Size S Recommendations': '1 (33.3%)',
                'Top Performers': '66.6%',
                'High Demand Sizes': '3',
                'Data Confidence': 'LOW - Early stage data (3 measurements)'
            };
            
            // Create CSV content
            let csvContent = 'Metric,Value\n';
            Object.entries(exportData).forEach(([key, value]) => {
                csvContent += `"${key}","${value}"\n`;
            });
            
            // Create and download file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', 'analytics_data_' + new Date().toISOString().split('T')[0] + '.csv');
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert('Analytics data exported successfully! File saved as CSV format.');
        }

        function exportSizeDistribution() {
            // Export size distribution data
            const sizeData = [
                ['Size', 'Recommendations', 'Percentage', 'Avg Bust', 'Avg Waist', 'Avg Hip', 'Production Priority'],
                ['L', '1', '33.3%', '37.0"', '30.0"', '35.0"', 'HIGH'],
                ['M', '1', '33.3%', '35.0"', '25.0"', '35.0"', 'HIGH'],
                ['S', '1', '33.3%', '33.0"', '20.0"', '31.0"', 'HIGH']
            ];
            
            // Create CSV content
            let csvContent = '';
            sizeData.forEach(row => {
                csvContent += row.map(cell => `"${cell}"`).join(',') + '\n';
            });
            
            // Create and download file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', 'size_distribution_' + new Date().toISOString().split('T')[0] + '.csv');
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert('Size distribution data exported successfully! File saved as CSV format.');
        }

        // Customer Database Functions
        function clearCustomerFilters() {
            document.querySelectorAll('#customers input[type="date"]').forEach(input => input.value = '');
            document.querySelectorAll('#customers select').forEach(select => select.selectedIndex = 0);
            
            // Show all rows
            const tableRows = document.querySelectorAll('.customer-table tbody tr');
            tableRows.forEach(row => {
                row.style.display = '';
            });
            
            // Reset count
            updateCustomerCount();
            alert('Customer filters cleared!');
        }

        function applyCustomerFilters() {
            const fromDate = document.querySelector('#customers input[type="date"]').value;
            const toDate = document.querySelectorAll('#customers input[type="date"]')[1].value;
            const month = document.querySelector('#customers select').value;
            const year = document.querySelectorAll('#customers select')[1].value;
            const size = document.querySelectorAll('#customers select')[2].value;
            
            console.log('Applying customer filters:', { fromDate, toDate, month, year, size });
            
            // Validate date range
            if (fromDate && toDate && new Date(fromDate) > new Date(toDate)) {
                alert('Error: From date cannot be later than To date');
                return;
            }
            
            // Show loading state
            const applyBtn = event.target;
            const originalText = applyBtn.innerHTML;
            applyBtn.innerHTML = '⏳ Applying...';
            applyBtn.disabled = true;
            
            // Simulate filter processing
            setTimeout(() => {
                // Filter table rows based on criteria
                filterCustomerTable(fromDate, toDate, month, year, size);
                
                // Update customer count
                updateCustomerCount();
                
                // Reset button first
                applyBtn.innerHTML = originalText;
                applyBtn.disabled = false;
                
                // Show success message after button is reset
                setTimeout(() => {
                    alert('Customer filters applied successfully! Table updated with filtered data.');
                }, 100);
            }, 1500);
        }

        function filterCustomerTable(fromDate, toDate, month, year, size) {
            const tableRows = document.querySelectorAll('.customer-table tbody tr');
            let visibleCount = 0;
            
            console.log('Filtering table with', tableRows.length, 'rows');
            
            tableRows.forEach((row, index) => {
                const cells = row.querySelectorAll('td');
                let showRow = true;
                
                console.log(`Row ${index}:`, cells.length, 'cells');
                
                // Filter by date
                if (fromDate || toDate) {
                    const rowDate = cells[0].textContent.trim();
                    console.log('Row date:', rowDate, 'From:', fromDate, 'To:', toDate);
                    
                    if (fromDate && rowDate < fromDate) {
                        showRow = false;
                        console.log('Hidden by from date');
                    }
                    if (toDate && rowDate > toDate) {
                        showRow = false;
                        console.log('Hidden by to date');
                    }
                }
                
                // Filter by size
                if (size !== 'All Sizes') {
                    const sizeCell = cells[11]; // Recommended size column
                    const sizeBadge = sizeCell.querySelector('.size-badge');
                    if (sizeBadge) {
                        const rowSize = sizeBadge.textContent.trim();
                        console.log('Row size:', rowSize, 'Filter size:', size);
                        if (rowSize !== size) {
                            showRow = false;
                            console.log('Hidden by size filter');
                        }
                    } else {
                        console.log('No size badge found in row', index);
                    }
                }
                
                // Filter by month
                if (month !== 'All Months') {
                    try {
                        const rowDate = new Date(cells[0].textContent.trim());
                        const rowMonth = rowDate.toLocaleString('default', { month: 'long' });
                        console.log('Row month:', rowMonth, 'Filter month:', month);
                        if (rowMonth !== month) {
                            showRow = false;
                            console.log('Hidden by month filter');
                        }
                    } catch (error) {
                        console.log('Error parsing date for month filter:', error);
                    }
                }
                
                // Filter by year
                if (year !== 'All Years') {
                    try {
                        const rowDate = new Date(cells[0].textContent.trim());
                        const rowYear = rowDate.getFullYear().toString();
                        console.log('Row year:', rowYear, 'Filter year:', year);
                        if (rowYear !== year) {
                            showRow = false;
                            console.log('Hidden by year filter');
                        }
                    } catch (error) {
                        console.log('Error parsing date for year filter:', error);
                    }
                }
                
                if (showRow) {
                    row.style.display = '';
                    visibleCount++;
                    console.log('Row', index, 'visible');
                } else {
                    row.style.display = 'none';
                    console.log('Row', index, 'hidden');
                }
            });
            
            console.log('Visible count:', visibleCount);
            // Store visible count for updateCustomerCount
            window.filteredCustomerCount = visibleCount;
        }

        function updateCustomerCount() {
            const countElement = document.querySelector('#customers .card > div:last-child > div:last-child');
            const totalCustomers = document.querySelectorAll('.customer-table tbody tr').length;
            const visibleCustomers = window.filteredCustomerCount || totalCustomers;
            
            console.log('Updating count:', visibleCustomers, 'of', totalCustomers);
            countElement.textContent = `Showing ${visibleCustomers} of ${totalCustomers} customers`;
        }

        function exportCustomerData() {
            // Get visible table data only
            const table = document.querySelector('.customer-table');
            const rows = table.querySelectorAll('tr');
            
            // Create CSV content
            let csvContent = '';
            
            // Add headers
            const headers = [];
            rows[0].querySelectorAll('th').forEach(th => {
                headers.push(th.textContent.trim());
            });
            csvContent += headers.join(',') + '\n';
            
            // Add data rows (only visible ones)
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                if (row.style.display === 'none') continue; // Skip hidden rows
                
                const cells = row.querySelectorAll('td');
                const rowData = [];
                
                cells.forEach(cell => {
                    let cellText = cell.textContent.trim();
                    // Remove size badge styling and get just the size
                    if (cell.querySelector('.size-badge')) {
                        cellText = cell.querySelector('.size-badge').textContent.trim();
                    }
                    // Escape commas and quotes
                    cellText = cellText.replace(/"/g, '""');
                    if (cellText.includes(',') || cellText.includes('"') || cellText.includes('\n')) {
                        cellText = '"' + cellText + '"';
                    }
                    rowData.push(cellText);
                });
                
                csvContent += rowData.join(',') + '\n';
            }
            
            // Create and download file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            
            link.setAttribute('href', url);
            link.setAttribute('download', 'customer_measurements_' + new Date().toISOString().split('T')[0] + '.csv');
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Show success message
            alert('Customer data exported successfully! File saved as CSV format.');
        }

        console.log('🎯 IdealFit Merchant Dashboard Loaded Successfully!');
    </script>
</body>
</html>